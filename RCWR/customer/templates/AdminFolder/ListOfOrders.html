{% extends 'AdminFolder/base.html' %}
{% load static %}

{% block content %}
  <!-- Layout wrapper -->
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
      <!-- Menu -->

      <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
        <div class="app-brand demo">
          <a href="index.html" class="app-brand-link ">
            <span class="app-brand-logo demo  ">
              <img src="{% static 'admin/assets/img/logo/a.jpeg' %}" alt="">
            </span>
            <span class="app-brand-text demo menu-text fw-bolder ms-2"><strong>C &amp; 3G</strong></span>
         
          </a>

          <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
            <i class="bx bx-chevron-left bx-sm align-middle"></i>
          </a>
        </div>

        <div class="menu-inner-shadow"></div>

        <ul class="menu-inner py-1">
          <!-- Dashboard -->
          <li class="menu-item ">
            <a href="{% url 'dashboard' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-home-circle"></i>
              <div data-i18n="Analytics">Dashboard</div>
            </a>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-detail"></i>
              <div data-i18n="Form Elements">Rice Items</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="#" class="menu-link">
                  <div data-i18n="Basic Inputs">Add Rice Item</div>
                </a>
              </li>
              <li class="menu-item ">
                <a href="{% url 'ricelist' %}" class="menu-link">
                  <div data-i18n="Input groups">Rice List</div>
                </a>
              </li>
            </ul>
          </li>

          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Customer Status</span>
          </li>

          <li class="menu-item active">
            <a href="{% url 'orders' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-collection"></i>
              <div data-i18n="Basic">List of orders</div>
            </a>
          </li>

          <li class="menu-item">
            <a href="{% url 'customerLendingStatus' %}" class="menu-link">
              <i class="menu-icon tf-icons bx bx-collection"></i>
              <div data-i18n="Basic">Lending Status</div>
            </a>
          </li>

          <!-- Forms & Tables -->
          <li class="menu-header small text-uppercase"><span class="menu-header-text">Shipping and Policies</span></li>
          <!-- Forms -->

          <li class="menu-item">
            <a href="{% url 'Shipping' %}" class="menu-link">
              <i class='menu-icon tf-iconds bx bxs-package'></i>
              <div data-i18n="Basic">Shipping</div>
            </a>
          </li>

          <li class="menu-item">
            <a href="{% url 'Policy' %}" class="menu-link">
              <i class='menu-icon tf-icon bx bx-notepad'></i>
              <div data-i18n="Basic">Lending Policies</div>
            </a>
          </li>
        </ul>
      </aside>
      <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
          <!-- Navbar -->

          <nav
            class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme"
            id="layout-navbar"
          >
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
              </a>
            </div>

            <!-- <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
             
              <div class="navbar-nav align-items-center justify-content-between" >
                <div class="nav-item align-items-center">
                  <i class="bx bx-search fs-4 lh-0"></i>
                  <form action="" method="POST" class="d-flex">
                    <input
                    type="search"
                    class="form-control border-0 shadow-none"
                    placeholder="Search..."
                    aria-label="Search"
                    style="padding-right: 40px;"
                  />
                
                  
                  </form>
                  
                </div>
              </div>
             

            </div> -->

            <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
              
              <div class="navbar-nav">
                <div class="nav-item d-flex align-items-center">
                  <i class="bx bx-search fs-4 lh-0"></i>
                  <form action="{% url 'search' %}" class="d-flex" method="POST">
                    {% csrf_token %}
                    <input
                    type="search"
                    class="form-control border-0 shadow-none"
                    placeholder="Search..."
                    aria-label="Search"
                    style="margin-right: 700px;"
                    name="searched"
                  />
                  <button class="btn btn-outline-primary">Search</button>
                  </form>
                  
                </div>
              </div>

       
             
          </nav>

          <!-- / Navbar -->

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->

            <div class="container-xxl flex-grow-1 container-p-y">
            
              <!-- Striped Rows -->
              <div class="card">
                  <div class="d-flex justify-content-between">
                    <div class="p-2">
                      <h5 class="card-header">LIST OF ORDERS</h5>
                    </div>
                    
                    <div class="ml-auto p-4 ">
                      <div class="dropdown dropstart text-end">
                        <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                          <i class='bx bx-menu bx-md'></i>
                        </button>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" href="#">	&laquo Filter By</a>
                            <ul class="dropdown-menu dropdown-submenu">
                              <li><a href="{% url 'orders' %}" class="dropdown-item">All Orders</a></li>
                              <li><a href="{% url 'NewOrders' %}" class="dropdown-item">New Orders</a></li>
                              <li><a href="{% url 'CancelledOrders' %}" class="dropdown-item">Cancelled Orders</a></li>
                              <li><a href="{% url 'LoanOrders' %}" class="dropdown-item">Loan Orders</a></li>
                              <li><a href="{% url 'NotLoanOrders' %}" class="dropdown-item">Orders</a></li>
                            </ul>
                          </li>
                          <li><a class="dropdown-item" href="#">	&laquo Sort By</a>
                            <ul class="dropdown-menu dropdown-submenu">
                                <li><a href="{% url 'Date_Desc' %}" class="dropdown-item">Date Latest</a></li>
                                <li><a href="{% url 'orders' %}" class="dropdown-item">Date Oldest</a></li>
                                <li><a href="{% url 'Alphabetical' %}" class="dropdown-item">Alphabetical order</a></li>
                            </ul>
                        </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                <div class="table-responsive text-nowrap">
                  <table class="table table-striped">
                    <thead>
                      <tr>
                        <th>Customer Name</th>
                        <th>Orders</th>
                        <th>Total Payment</th>
                        <th>Rice Loan</th>
                        <th>Order Status</th>
                        <th>Date Ordered</th>
                      </tr>
                    </thead>
                    <tbody class="table-border-bottom-0">
                      {% for deets in orderdetails %}
                      <tr>
                        <td>
                          {% if deets.orderStatus == 'Cancelled' %}
                            <i style="color: rgb(255, 0, 0);">{{deets.customer.name}}</i> 
                          {% else %}
                           <a href="/OrderDetail/{{deets.id}}">{{deets.customer.name}}</a>
                          {% endif %}
                        
                        </td>
                        <td>                                                   
                          <ul>
                            {% for rice in deets.order.orderriceitems_set.all %}
                              <li>
                                {{rice.rice.name}} ({{rice.quantity}}x)
                              </li>
                            {% endfor %}
                          </ul>

                        </td>
                        <td>â‚±{{deets.total_payment}}</td>
                        <td>{{deets.loan}}</td>
                        <td>
                          {% if deets.orderStatus == 'Owner is Validating your order' %}
                            <p>For Validation</p> 
                          {% elif deets.orderStatus == 'Cancelled' %}
                            <i style="color: red;">Cancelled</i>
                          {% else %}
                            {{deets.orderStatus}}
                          {% endif %}
                        </td>
                        <!-- <td>
                          <div class="dropdown">
                        
                              <button type="button" class="btn p-0 dropdown-toggle hide-arrow" data-bs-toggle="dropdown">
                                <i class="bx bx-dots-vertical-rounded"></i>
                              </button>

                            <div class="dropdown-menu">
                              {% if deets.orderStatus == 'Cancelled' or deets.shippingStatus == 'Delivered' or deets.shippingStatus == 'Picked Up' %}

                              {% else %}

                              <a class="dropdown-item" href="/update/{{deets.id}}"><i class="bx bx-edit-alt me-1"></i> Edit</a>
                              
                              {% endif %}

                              <a class="dropdown-item" href="javascript:void(0);"
                                ><i class="bx bx-trash me-1"></i> Delete</a
                              >
                            </div>
                          </div>
                        </td> -->
                        <td>{{deets.Date_Added}}</td>
                      </tr>
                      {% endfor %}		
                      	                     
                    </tbody>
                  </table>
                </div>
              </div>
              <div class="text-center text-muted mt-3">
                {% if orderdetails.has_previous %}
                  <a href="?page=1">&laquo First</a>
                  <a href="?page={{orderdetails.previous_page_number}}">Previous</a>
                {% endif %}

                Page {{orderdetails.number}} of {{orderdetails.paginator.num_pages}}

                {% if orderdetails.has_next %}
                  <a href="?page={{orderdetails.next_page_number}}">Next</a>
                  <a href="?page={{orderdetails.paginator.num_pages}}">Last &raquo</a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>
{% endblock content %}